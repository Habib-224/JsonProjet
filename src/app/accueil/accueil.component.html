<app-header></app-header>

<div class="container mt-5">
  <input type="text" class="form-control bg-light border-0 small " placeholder="Search for..." aria-label="Search" aria-describedby="basic-addon2" [(ngModel)]="userFilter">
  <br>
  <!-- Button trigger modal -->
  <button type="button" class="btn btn-secondary mb-3" data-bs-toggle="modal" data-bs-target="#exampleModal">
    ajouter Article
  </button>

  <div class="articleaffiche">
    <div class="card shadow-lg" style="width: 18rem;"   *ngFor = "let datauser of DataComment ">
      <img src="https://img.freepik.com/photos-premium/tablette-smartphone-site-web-actualites-ecran-journaux-dessous_771335-35890.jpg?size=626&ext=jpg&ga=GA1.1.2145246215.1689776414&semt=ais" class="card-img-top" alt="...">
      <div class="card-body" [ngClass]="{ 'is-archived': isArchived }">
        <h5>{{datauser.title}}</h5>
        <p class="card-text">{{datauser.body}}</p>
        <div class=" d-flex justify-content-center">
          <button class="btn btn-outline-success" [routerLink]="['/detail', datauser.id]">Detail</button>&nbsp;
          <button class="btn btn-outline-warning" data-bs-toggle="modal" data-bs-target="#exampleModal1" (click)="RecuperationId(datauser.id)" >Modifier</button>&nbsp;
          <button class="btn btn-outline-danger" (click)="toggleArchive(datauser.id)">Archiver</button>
         </div>
      </div>
    </div>
  </div>
</div>


<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Ajout Article</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form (ngSubmit)="addNewArticle()">
          <label>Titre :</label><br>
          <input type="text" name="userName" id="titre" [(ngModel)]="newArticle.title" required><br>
          <label>Contenu :</label><br>
          <input type="contenu" name="userEmail" id="contenu" [(ngModel)]="newArticle.body" required>
          <button type="submit" class="btn btn-primary" style="margin-top: 10px;">Ajouter</button>
        </form>
      </div>
    </div>
  </div>
</div>


<div class="modal fade" id="exampleModal1" tabindex="-1" aria-labelledby="exampleModalLabel1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Modification Article</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="modal-body">
          <form (ngSubmit)="ModifierPost(idpost)">
            <label>Titre :</label><br>
            <input type="text" name="userName" [(ngModel)]="UpdatePost.title" id="titre" required value="{{titre}}"><br>
            <label>Contenu :</label><br>
            <input type="email" name="userEmail" [(ngModel)]="UpdatePost.body" id="contenu" required value="{{post}}"><br>
            <button type="submit" style="margin-top: 10px;" class="btn btn-primary">Modifier</button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
